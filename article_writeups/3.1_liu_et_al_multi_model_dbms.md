# Reflection on [Multi-model Database Management Systems - A Look Forward](https://link.springer.com/chapter/10.1007%2F978-3-030-14177-6_2)

#### Liu Z.H., Lu J., Gawlick D., Helskyaho H., Pogossiants G., Wu Z. (2019) Multi-model Database Management Systems - A Look Forward. In: Gadepally V., Mattson T., Stonebraker M., Wang F., Luo G., Teodoro G. (eds) Heterogeneous Data Management, Polystores, and Analytics for Healthcare. DMAH 2018, Poly 2018. Lecture Notes in Computer Science, vol 11470. Springer, Cham. https://doi.org/10.1007/978-3-030-14177-6_2

[(home)](https://beqpolk1.github.io/csci-592-spring2022/)

---

This paper introduces the idea of a multi-model database management system, describes the sorts of operations and functionality it should support, and posits category theory as a mathematical foundation for the approach. However, I was a little disappointed by the fact that the paper didn’t go further into depth with applied examples of using category theory to represent and transform data models. Instead, it focused more on the type of role a mature MMDBMS would serve in the future, once the supporting theory, data models, query language, storage techniques, etc. have been developed and applied. In keeping with a previous reading, [“A Vision for Management of Complex Models”](1.2_bernstein_halevy_pottinger_complex_models.md), I felt like this article could be titled “A Vision of Multi-model Database Management Systems”.

Liu et al. open by discussing the evolution of databases and the modern proliferation of NoSQL systems. They mention the polyglot persistency approach, but point out that a unified data model with a single declarative query language would be preferable to integrating different databases at the application layer – “The biggest issue of polyglot persistency is that the combined [DBMS] is neither declarative nor unifed”. Their view is that achieving such properties will require a more robust mathematical foundation, akin to relational algebra for SQL systems, and volunteer category theory as a candidate for this foundation.

After a brief introduction to category theory concepts, Liu et al. describe how they envision those concepts as applied to databases; a database schema is considered as a collection with objects and morphisms between objects, and functors are considered as mappings that can take one database schema to another. Considering a correspondence between relational and hierarchical (JSON document) schemas, they define three operations (functors): 
* Pullback – splits the JSON document into tables
* Right Pushforward – building a document from relational tables using an ```INNER JOIN``` approach
* Left Pushforward – building a document from relational tables using an ```OUTER JOIN``` approach

Functors, and morphisms between them, would, “…enable a query over one data model to be transparently rewritten into an equivalent query over another data model.” Since a view is defined by a query, a view also becomes, “…a simple way to virtually access one data model on top of another”. This is the heart of Liu et al.’s proposal for a MMDBMS – the ability for data to be stored in one model but then queried in the context of a different model, with the MMDBMS providing the transformation transparently. They predict that systems could leverage techniques from the algebraic properties of the transformation functions to avoid materializing any intermediate views; data would seamlessly flow from the source model to the model appropriate for answering the query. One idea I found particularly interesting is that, “They underlying data may be stored natively in user input format as the source of truth.” This allows not only for data to be defined in a variety of formats, but also that multiple versions of a schema can exist for a given object in the database. The multi-view approach minimizes schema evolution and data migration issues.

The authors also go into some discussion that MMDBMS should provide atomicity, fault resilience and recovery, and inverted indices to facilitate efficient searches in a model-context aware way (I am not familiar with inverted indices and would have to do more research to understand their application here). They also make some interesting comments on the role of machine learning to analyze schemas and suggest appropriate data models. Like the rest of the paper, though, these remarks serve more as prescriptions and guidelines for development than fleshed out explanations of implementations that use category theory. This paper is helpful as a list of general requirements that any full-fledged MMDBMS should meet in order to provide useful data storage and access, and the suggestion of category theory as a theoretical foundation is a very intriguing proposition. Also, the authors present some very useful architectural ideas for how a MMDBMS might be structured. Still, I had hoped less for *assertions* that “a MMDBMS should do *x*” and “category theory will support *y*” and more for deeper explorations of specific implementations of these ideas.

---

Still, this is a good time to review some of the approaches and proposals I have seen so far, and consider what each may have to offer:
* “Unified Data Modeling…”, by Allen Wang, advocated for the tool ERwin, which can build a unified model between relational and some NoSQL data models. The unified model here features **entities**, **properties**, **relationships**, and **tags**.
* In “A Vision for Management…”, Bernstein et al. suggest an object-oriented unified model that could also be represented as a tree. They get into some theoretical considerations, such as composition of model transformation and treatment of transformations as entities in their own right, which actually align quite closely with the parts of category theory used by Liu et al. Their tree-based conception of database schemas also aligns with Liu; as such, the universal model presented in this paper could potentially yield results compatible with category theory concepts and therefore provide some of the functionality described by Liu.
* “Data Modeling in the NoSQL World” focused more narrowly on how to design appropriate, efficient data models in a NoSQL context. Concepts in their model include **collections** (but not in the manner of category theory), **blocks**, and **entries**. Elements of this model could prove valuable for future universal modeling or for structuring MMDBMS data for efficient access, but the considerations here were more practical and tailored than some other papers.
* “Inferring Versioned Schemas…” presented a technique for extracting implicit NoSQL schemas. Such techniques would be invaluable in the MMDBS as presented, because much of the DBMS operation is performed “just-in-time” without any formal schema specifications (depending on the data model). The JSON metamodel presented here seemed more robust than that in the “Data Modeling…” paper, and also better captured the flexibility inherent in most NoSQL data.
* “A Universal Metamodel…” brought in a very high level of abstraction in order to robustly capture elements of different datamodels. Interestingly, the authors represented the metamodel through a relational model, as opposed to an object or tree model. Perhaps this would be equally robust and better suited to category theory; perhaps it would be less so. Main features of their metamodel are “constructs” and “metaconstructs”, which represent structural concepts in a model and would likely govern the morphisms of an associated category.

A full application could potentially be developed using several of the above. Suppose a database contained a mix of data stored in relational SQL tables and documents stored in a hierarchical data format. Those documents could be analyzed to infer some candidate schemas. Perhaps other NoSQL paradigms (such as graph or column store databases) could be folded in; their schemas would likely also require just-in-time inference. Those schemas, and the *defined* schema of the relational model, could be formalized using some of the universal metamodel techniques presented. These metamodels could be fit in the context of category theory in order to implement the functionality described by Liu et al. Finally, machine learning techniques could be applied to discover better mappings (functors) between the data models, to suggest new models, to validate new data against implicit schemas, or to speed up data access.   
